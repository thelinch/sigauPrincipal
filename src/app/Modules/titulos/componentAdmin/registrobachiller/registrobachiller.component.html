<div>
  <div class="row">
    <div class="row">
      <div class="col s12 m6 putLeft ">
        <div class="dvContentTitMod ">
          <span class="putLeft tituloModalG">REGISTRO NACIONAL DE </span>
          <span class="putLeft tituloModalM">GRADOS ACADEMICOS Y TITULOS PROFESIONALES</span>
        </div>
      </div>
    </div>
    <mat-divider></mat-divider>

    <!-- Modal Buscar estudiante Externo o interno -->
    <div class="card">
      <div class="card-content teal accent-4 right-align">
        <p class="left white-text"><b>Lista de Estudiantes para Graduar</b></p>
        <a class="waves-effect waves-light btn  white darken-4 black-text tooltipped"
          (click)="abrirModal(idModalAgregarAlumnoPregrado)" data-tooltip="Seleccionar"><i
            class="material-icons right">send</i>Agregar</a>
      </div>
    </div>
    <mat-divider></mat-divider>
    <div class="row">
      <div class="col s12 m8">

        <table *ngIf="listaAlumnoSeleccionados.selected.length>0" class="striped centered responsive-table">
          <thead>
            <tr>
              <th>check</th>
              <th>Nombre</th>
              <th>Apellidos</th>
              <th>Escuela Profesional</th>
            </tr>
          </thead>

          <tbody>

            <tr *ngFor="let alumnoSeleccionado of listaAlumnoSeleccionados.selected ">
              <td>
                <mat-checkbox [disabled]="true" #check></mat-checkbox>
              </td>
              <td>{{alumnoSeleccionado.persona.nombre}} </td>
              <td>{{alumnoSeleccionado.persona.apellido_paterno +" "+alumnoSeleccionado.persona.apellido_materno}}</td>
              <td> {{alumnoSeleccionado.escuela_profesional.nombre}}</td>
              <td>
                <a (click)="seleccionarAlumno(alumnoSeleccionado,check);verificacionDeAlumnoBachiller(alumnoSeleccionado);listarDenominacionGradoPorEspecialidad(alumnoSeleccionado);abrirModal(idModalParaRegistroDeDenominaciones)"
                  matTooltip="Agregar datos al alumno" class="btn-floating blue waves-effect waves-light "><i
                    class="material-icons">add</i></a>
              </td>
              <td>
                <a matTooltip="visualizar  datos del alumno" class="btn-floating blue waves-effect waves-light "><i
                    class="material-icons">remove_red_eye</i></a>
              </td>
              <td>
                
                <a matTooltip="remover  alumno" (click)="removerAlumno(alumnoSeleccionado)" class="btn-floating blue waves-effect waves-light "><i
                    class="material-icons">delete</i></a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col s12 m4">
        <p>hol</p>
      </div>
    </div>
  </div>
</div>

<!-- Modal Structure Buscar estudiantes-->
<div [id]="idModalAgregarAlumnoPregrado" class="modal modal-fixed-footer">
  <div class="modal-content">
    <div class="row">
      <!-- Codigo para Filtrar-->
      <mat-form-field class=" col s12 m4 margen">
        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar por NÂ° documento">
      </mat-form-field>

      <mat-form-field class=" col s12 m4 margen ">
        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar por Apellidos">
      </mat-form-field>

      <mat-form-field class="col s12 m4 margen">
        <mat-label>Seleccione facultad</mat-label>
        <mat-select>
          <mat-option>Ninguna</mat-option>
          <ng-container *ngIf="listaEscuelaprofesionales$ | async;let listaEscuelaprofesionales;else efectoCarga">
            <mat-option *ngFor="let EscuelaProfesional of listaEscuelaprofesionales" [value]="EscuelaProfesional">
              {{EscuelaProfesional.nombre}}</mat-option>
          </ng-container>

        </mat-select>
      </mat-form-field>
    </div>

    <!--Codigo para hacer mostrar los estudiantes internos y externos-->
    <div class="">
      <table mat-table [dataSource]="dataSource">

        <!-- Checkbox Column -->
        <ng-container matColumnDef="select">
          <th mat-header-cell *matHeaderCellDef>
            <mat-checkbox (change)="$event ? masterToggle() : null"
              [checked]="listaAlumnoSeleccionados.hasValue() && isAllSelected()"
              [indeterminate]="listaAlumnoSeleccionados.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row">
            <mat-checkbox (click)="$event.stopPropagation()"
              (change)="$event ? listaAlumnoSeleccionados.toggle(row) : null"
              [checked]="listaAlumnoSeleccionados.isSelected(row)" [aria-label]="checkboxLabel(row)">
            </mat-checkbox>
          </td>
        </ng-container>

        <!-- Position Column -->


        <!-- Name Column -->
        <ng-container matColumnDef="nombre">
          <th mat-header-cell *matHeaderCellDef class="colortablewhite"> Nombre.</th>
          <td mat-cell *matCellDef="let alumno "> {{alumno.persona.nombre}} </td>
        </ng-container>
        <ng-container matColumnDef="apellidos">
          <th mat-header-cell *matHeaderCellDef class="colortablewhite"> Nombre.</th>
          <td mat-cell *matCellDef="let alumno ">
            {{alumno.persona.apellido_paterno +" "+alumno.persona.apellido_materno}}
          </td>
        </ng-container>
        <ng-container matColumnDef="escuela profesional">
          <th mat-header-cell *matHeaderCellDef class="colortablewhite"> Escuela Profesional.</th>
          <td mat-cell *matCellDef="let alumno ">
            {{alumno.escuela_profesional.nombre}}
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="listaAlumnoSeleccionados.toggle(row)">
        </tr>
      </table>
      <mat-paginator class=" " [pageSizeOptions]="[4, 8, 16]" showFirstLastButtons></mat-paginator>
    </div>
    <!-- Fin de Codigo para hacer mostrar los estudiantes internos y externos-->

  </div>
  <div class="modal-footer">
    <a (click)="cerrarModal(idModalAgregarAlumnoPregrado)" class="waves-effect waves-red btn-flat">cerrar</a>
  </div>
</div>
<!-- Fin de Modal Buscar estudiante Externo o interno -->

<div [id]="idModalParaRegistroDeDenominaciones" class="modal">
  <form [formGroup]="formularioRegistroBachiller" (submit)="agregarDatosAlumno(formularioRegistroBachiller.value)">
    <div class="modal-content">
      <div class="row">
        <mat-form-field class="col s12 m6 margin">
          <mat-label>Codigo Univeridad</mat-label>
          <input matInput placeholder="Codigo Universiad" formControlName="codigoUniversidad">
        </mat-form-field>
        <mat-form-field class="col s12 m6 margin">
          <mat-label>Denominaciones</mat-label>
          <mat-select [compareWith]="compareObjeto" formControlName="denominacionGradoTitulo">
            <mat-option *ngFor="let denominacion of listaDenominacionesPorEspecialidad" [value]="denominacion">
              {{denominacion.nombre}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="modal-footer right-align">
      <button type="submit" [disabled]="!formularioRegistroBachiller.valid"
        class="waves-effect waves-green green btn-flat">agregar</button>
    </div>
  </form>
</div>
<ng-template #efectoCarga>
  <mat-spinner></mat-spinner>
</ng-template>