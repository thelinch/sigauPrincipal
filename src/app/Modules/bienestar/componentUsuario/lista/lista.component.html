<block-ui>
  <h2 class="center-align">LISTA DE SERVICIOS </h2>
  <div class="row">
    <div class="col s12 m5  ">
      <div class="solicitar card-panel  fondo-ocda">
        <div class="header white-text">
          <div class="title">
            <h4 class="center-align">Servicios Solicitados</h4>
          </div>
          <div class="padding_2rem right-align ">
            <a matTooltip="Nueva solicitud" class="btn-floating z-depth-3 btn-large waves-effect waves-light blue"
              [ngClass]="{disabled:servicioSolicitadoActualPorAlumnoYSemestreActual}"
              (click)="verificarExistenciaDeServicioSolicitado(idModalServicio)">
              <i class="material-icons">add</i>
            </a>
          </div>
        </div>
        <div class="divider"></div>
        <div class="card-stacked">
          <div class="card-content">
            <div class="row">
              <div class="col s12">
                <div class="card hoverable" *ngIf="servicioSolicitadoActualPorAlumnoYSemestreActual">
                  <div class="card-title">
                    <h5 class="padding_4">
                      {{servicioSolicitadoActualPorAlumnoYSemestreActual.codigoMatricula}}
                    </h5>
                    <div class="position_absolute padding_4 right_0 top_0">
                      <div class="chip" [matTooltip]="servicio.nombre"
                        *ngFor="let servicio of  servicioSolicitadoActualPorAlumnoYSemestreActual.servicios">
                        <i class="fas {{servicio.icono}}"></i>
                      </div>
                      <div class="chip white-text indigo  lighten-1"
                        matTooltip="estado actual de los servicios solicitados">
                        {{this.servicioSolicitadoActualPorAlumnoYSemestreActual.estado_servicio.nombre}}
                      </div>
                    </div>
                  </div>
                  <div class="card-content position_relative">
                    {{servicioSolicitadoActualPorAlumnoYSemestreActual.fechaRegistro}}
                  </div>
                  <div class="card-action right-align">
                    <a matTooltip="Requisitos" class="btn-floating btn-small waves-effect fondo-ocda"><i
                        class="material-icons">
                        description
                      </i></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col s12 m7">
      <div class="row">
        <div class="col s12">
          <h4 class="center-align">Solicitudes Realizadas</h4>
        </div>
      </div>
      <div class="col s12 m6">
        <div class="card hoverable">
          wdwidjwijdi
        </div>
      </div>
      <div class="col s12 m6">
        <div class="card hoverable">
          wdwidjwijdi
        </div>
      </div>
      <div class="col s12 m6">
        <div class="card hoverable">
          wdwidjwijdi
        </div>
      </div>
      <div class="col s12 m6">
        <div class="card hoverable">
          wdwidjwijdi
        </div>
      </div>
    </div>
  </div>
  <div [id]="idModalServicio" class="modal modal-fixed-footer  overflow_x_hidde">
    <div class="modal-content overflow_x_hidde">
      <div class="row">
        <h4 class="col s12 m6">Elige el servicio</h4>
        <mat-form-field class="col s12 m6">
          <mat-select placeholder="Servicios" multiple [formControl]="formControlListaServicio"
            (selectionChange)="changeSelectListaServicios($event)">
            <mat-option [value]="servicio.id" *ngFor="let servicio of listaServiciosActivados">
              {{servicio.nombre}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <mat-vertical-stepper #stepper>
        <span *ngIf="listaRequisitosPorServicio">{{listaRequisitosPorServicio.length}}</span>
        <mat-step #matStep [stepControl]="formFile" [matTooltip]="requisito.nombre" class="position_relative"
          [optional]="!requisito.requerido" *ngFor="let requisito of listaRequisitosPorServicio">
          <ng-template matStepLabel>{{requisito.nombre | titlecase}}</ng-template>
          <a #boton matTooltip="Registar Requisito" [ngClass]="{'disabled': !formFile.valid}"
            (click)="subirImagenFileWithPreview(requisito.id,requisito.tipoArchivo,requisito.nombreArchivo,requisito,stepper,matStep,boton)"
            class="btn-floating btn-small waves-effect waves-light red  position_absolute right_0 top_0"
            style="z-index: 100"><i class="material-icons">cloud_upload</i></a>
          <div class="card" [matTooltip]="requisito.descripcion">
            <div class="card-content truncate ">
              {{requisito.descripcion}}
            </div>
          </div>
          <!-- <dropzone [message]="'Arrastar o hacer click'" (sending)="onSending($event,requisito.id)"
            #drpzone="ngxDropzone" (success)="onUploadSuccess($event)" class="dropzone-container">
          </dropzone>-->
          <form #formFile="ngForm">
            <div class="custom-file-container" [attr.data-upload-id]="requisito.id">
              <label>Archivos: <a href="javascript:void(0)" class="custom-file-container__image-clear  red-text"
                  title="Clear Image"><i class="material-icons">cancel</i></a></label>
              <label class="custom-file-container__custom-file">
                <input type="file" class="custom-file-container__custom-file__custom-file-input"
                  [accept]="requisito.tipoArchivo" name="file" ngModel required multiple aria-label="Subir Archivos"
                  (click)="crearInstanciaFileWithPreview(requisito.id)">
                <input type="hidden" name="MAX_FILE_SIZE" value="12485760" />
                <span class="custom-file-container__custom-file__custom-file-control"></span>
              </label>
              <div class="custom-file-container__image-preview"></div>
            </div>
          </form>
        </mat-step>
      </mat-vertical-stepper>
    </div>
    <div class="modal-footer">
      <a class="waves-effect btn  waves-light red" (click)="cerrarModal(idModalServicio)"><i
          class="material-icons">close</i></a>
      <a class="waves-effect btn waves-light fondo-ocda" matTooltip="Registrar sevicios para su revision"
        [ngClass]="{disabled:!stepper.completed}" (click)="registrarServiciosParaEvaluacion()"><i
          class="material-icons">send</i></a>
    </div>

  </div>

</block-ui>

<div class="fixed-action-btn">
  <a class="btn-floating btn-large blue" matTooltip="Notificaciones">
    <i class="large material-icons">notifications</i>
  </a>
  <ul>
    <li><a class="btn-floating red"> <i class="material-icons">insert_chart</i></a></li>
    <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a></li>
    <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>
    <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a></li>
  </ul>
</div>